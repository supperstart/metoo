<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
wx.config({
    debug: false,
    appId: "$!appId",
    timestamp: "$!timestamp",
    nonceStr: "$!nonceStr",
    signature: "$!signature",
    jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage'] // 功能列表，我们要使用JS-SDK的什么功能
});
wx.ready(function(){
    // 获取“分享到朋友圈”按钮点击状态及自定义分享内容接口
    wx.onMenuShareTimeline({
        title: '$!title', // 分享标题
        link:"$!link",
        imgUrl: "$!imgUrl", // 分享图标
        type: 'link', // 分享类型,music、video或link，不填默认为link
        success: function () { 
			// 用户确认分享后执行的回调函数
			//确认分享后，用户增加10积分
			//shareSuccess();
			
		}
    });
    // 获取“分享给朋友”按钮点击状态及自定义分享内容接口
    wx.onMenuShareAppMessage({
        title: '$!title', // 分享标题
        desc: "$!title", // 分享描述
        link:"$!link",
        imgUrl: "$imgUrl", // 分享图标
        type: 'link', // 分享类型,music、video或link，不填默认为link
        success: function () { 
			// 用户确认分享后执行的回调函数
			//确认分享后，用户增加10积分
			//shareSuccess();
			
		}
        
    });

});

//分享成功后的回调方法
function shareSuccess(){
	jQuery.ajax({type:'POST',
          url:'$!webPath/wap/shareSuccess.htm',
		  data:{},
		  success:function(data){
		  	var jsonObj = eval( '(' + data + ')' ); 
		  	alert(jsonObj.result);
			   /* if(jsonObj.result == "success"){
					alert("分享成功，获得10个积分");
				}else{
					alert("分享失败！");
				} */
          }
   	});
}
</script>
