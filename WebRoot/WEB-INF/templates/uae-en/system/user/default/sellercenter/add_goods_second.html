<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>商家后台-发布新商品</title>
<meta name="keywords" content="$!config.keywords" />
<meta name="description" content="$!config.description" />
<meta name="generator" content="$!{config.meta_generator}" />
<meta name="author" content="$!{config.meta_author}">
	<meta name="copyright" content="$!{config.copyRight}">
		<link
			href="$!webPath/resources/style/system/front/default/css/public.css"
			type="text/css" rel="stylesheet" />
		<link
			href="$!webPath/resources/style/system/front/default/css/user.css"
			type="text/css" rel="stylesheet" />
		<link href="$!webPath/resources/style/common/css/overlay.css"
			type="text/css" rel="stylesheet" />
		<link
			href="$!webPath/resources/style/common/css/jquery-ui-1.8.22.custom.css"
			type="text/css" rel="stylesheet">
			<script src="$!webPath/resources/js/jquery-1.6.2.js"></script>
			<script src="$!webPath/resources/js/jquery-ui-1.8.21.js"></script>
			<script src="$!webPath/resources/js/ajaxfileupload.js"></script>
			<script src="$!webPath/resources/js/jquery.zh.cn.js" charset="utf-8"></script>
			<script src="$!webPath/resources/js/jquery.shop.common.js"></script>
			<script src="$!webPath/resources/js/jquery.validate.min.js"></script>
			<script src="$!webPath/resources/js/jquery.metadata.js"></script>
			#if($!store.grade.add_funciton) <script charset="utf-8"
				src="$!webPath/resources/editor/kindeditor.js"></script>
			<script charset="utf-8"
				src="$!webPath/resources/editor/lang/zh_CN.js"></script>
			#end <script>
jQuery.validator.addMethod("profix", function(value, element) {
    return /^[0-9a-zA-Z]{0,6}$/.test(value);
}, "前缀必须是6字之内字母数字的组合");
jQuery.validator.addMethod("f_code_profix",
    function(value, element) {
        if (jQuery(':radio[id=f_sale_type][value=1]').attr('checked')&&jQuery("#f_code_json").val()==""){
	        	if (jQuery('#f_code_profix').val() == ''){
	        		return false;
	        	}else{
	        		return true;
	        	}
        }else{
        	return true;
        }}
    );
jQuery.validator.addMethod("f_code_count",
    function(value, element) {
        if (jQuery(':radio[id=f_sale_type][value=1]').attr('checked')&&jQuery("#f_code_json").val()==""){
	        	if (jQuery('#f_code_count').val() == ''){
	        		return false;
	        	}else{
	        		return true;
	        	}
        }else{
        	return true;
        }}
    );
 jQuery.validator.addMethod("transportId",
    function(value, element) {
        if (jQuery(':radio[id=goods_transfee][value=0]').attr('checked') && jQuery(':radio[id=transport_type][value=0]').attr('checked')){
	        	if (jQuery('#transport_id').val() == ''){
	        		return false;
	        	}else{
	        		return true;
	        	}
        }else{
        	return true;
        }}
    ); 
/*     
jQuery.validator.addMethod("transportId",
	    function(value, element) {
	        if (jQuery(':radio[id=goods_transfee][value=0]').attr('checked')){
		        	if (jQuery('#transport_id').val() == ''){
		        		return false;
		        	}else{
		        		return true;
		        	}
	        }else{
	        	return true;
	        }}
	    ); */
    
    jQuery.validator.addMethod( "verify_sku", //验证方法名称  
	   function(value,element) {//验证规则  
    	
		var id=jQuery("#goods_id").val()
		var store_id=jQuery("#store_id").val()
	
        var result = false;
        // 设置同步
        jQuery.ajaxSetup({
            async: false
        });
        var param = {
        	goods_serial: value
        };
        if(id){
        	param.id=id;
        }
        if(store_id){
        	param.store_id=store_id;
        }
        jQuery.post('$!webPath/verify_goodsSerial.htm', param, function(data){
           if(data=='true'){
        	   result=true;
           }
        });
        // 恢复异步
        jQuery.ajaxSetup({
            async: true
        });
        return result;
	   
	   },'sku已存在');
    
  #if($!store.grade.add_funciton)
  //options为编辑配置属性pc
var options1 = {
        cssPath : '$!webPath/resources/editor/plugins/code/prettify.css',
        filterMode : true,
		uploadJson:'$!webPath/upload.htm',
		width : '860px',
		height:'400px',
		resizeType : 1,
		allowImageUpload : false,
		allowFlashUpload : false,
		allowMediaUpload : false,
		allowFileManager : false,
		syncType:"form",
		afterCreate : function() {
							var self = this;
							self.sync();
						},
		afterChange : function() {
							var self = this;
							self.sync();
						},
		afterBlur : function() {
							var self = this;
							self.sync();
						},
		items:['source', '|', 'fullscreen', 'undo', 'redo', 'cut', 'copy', 'paste',
			'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',
			'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',
			'superscript', '|', 'selectall', 'clearhtml','quickformat','|',
			'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
			'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image','flash', 'media', 'table', 'hr', 'emoticons', 'link', 'unlink', '|', 'about']
}; 
//options为编辑配置属性app
var options2 = {
        cssPath : '$!webPath/resources/editor/plugins/code/prettify.css',
        filterMode : true,
		uploadJson:'$!webPath/upload.htm',
		width : '360px',
		height:'400px',
		minWidth:'360px',
		resizeType : 1,
		allowImageUpload : false,
		allowFlashUpload : false,
		allowMediaUpload : false,
		allowFileManager : false,
		syncType:"form",
		afterCreate : function() {
							var self = this;
							self.sync();
						},
		afterChange : function() {
							var self = this;
							self.sync();
						},
		afterBlur : function() {
							var self = this;
							self.sync();
						},
		items:['source', '|', 'undo', 'redo', 'cut', 'copy', 'paste',
			'|', 'justifyleft', 'justifycenter',  'insertorderedlist', 'insertunorderedlist', '|',
			'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
			'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|',  'image','hr', '|', 'about']
}; 
#end
var user_goods_class_count=2;
jQuery(document).ready(function() {
	jQuery(".upload_pictures_bottom ul").sortable({stop: function(event,ui){},start:function(event,ui){},revert: true});
	jQuery(".upload_pictures_bottom ul").bind('sortstop',
		function(event, ui){
			draw_goods_main_img();
			jQuery(ui.item).css("cursor","auto");
		});
	jQuery(".upload_pictures_bottom ul").bind('sortstart',
		function(event, ui){
			jQuery(ui.item).css("cursor","move");
		}); 	
	jQuery(".upload_pictures_bottom ul" ).disableSelection();
 //默认赋值
  jQuery(":radio[id='goods_transfee'][value='$!{obj.goods_transfee}']").attr("checked",true);
  jQuery(":radio[id='publish_goods_status'][value='$!{obj.publish_goods_status}']").attr("checked",true);
  jQuery(":radio[id='goods_recommend'][value='$!{obj.goods_recommend}']").attr("checked",true);
  jQuery(":radio[id='inventory_type'][value='$!{obj.inventory_type}']").attr("checked",true);
  jQuery(":radio[id='goods_choice_type'][value='$!{obj.goods_choice_type}']").attr("checked",true);
  jQuery(":radio[id='goods_cod'][value='$!{obj.goods_cod}']").attr("checked",true);
  jQuery(":radio[id='tax_invoice'][value='$!{obj.tax_invoice}']").attr("checked",true);
  jQuery(":radio[id='f_sale_type'][value='$!{obj.f_sale_type}']").attr("checked",true);
  jQuery(":radio[id='advance_sale_type'][value='$!{obj.advance_sale_type}']").attr("checked",true);
  jQuery("#goods_top_format_id").val("$!obj.goods_top_format_id");
  jQuery("#goods_bottom_format_id").val("$!obj.goods_bottom_format_id");
  //jQuery(":radio[id='goods_transfee'][value='$!{obj.goods_transfee}']").attr("checked",true);
  #if($!obj.f_sale_type==1)
    jQuery("tr[id^=f_code_]").show();
  #end
  #if($!obj.advance_sale_type==1)
    jQuery("tr[id^=advance_sale_]").show();
  #end
  
  jQuery("#goods_brand_id").val("$!obj.goods_brand.id");
  #foreach($ugc in $obj.goods_ugcs)
    jQuery("#ugc_id_$!{velocityCount}").val("$!ugc.id");
  #end
  #foreach($spec in $obj.goods_specs)
    jQuery(":checkbox[id=spec_$!{spec.id}]").attr("checked",true);
  #end
  
  #if($!obj.inventory_type=="spec")
	 
   var goods_spec_ids="";
   jQuery(":checkbox[id^=spec_][checked=true]").each(function(){
        goods_spec_ids=jQuery(this).val()+","+goods_spec_ids;
   });
   
   jQuery.post("$!webPath/seller/goods_inventory.htm",{"goods_spec_ids":goods_spec_ids},function(data){
	   jQuery("#inventory_detail_content").append(data);																						
       jQuery("#inventory_detail").show();
		 var inventory_detail='$!obj.goods_inventory_detail';
         var goods_inventory_detail=eval("("+inventory_detail+")");
         jQuery.each(goods_inventory_detail, function(index,item){
        		jQuery("#inventory_details_count_"+item.id).val(item.count);
      	        jQuery("#inventory_details_price_"+item.id).val(item.goods_price);
      			jQuery("#inventory_details_supplement_"+item.id).val(item.supp);
      			jQuery("#inventory_details_weight_"+item.id).val(item.weight);
      			jQuery("#inventory_details_length_"+item.id).val(item.length);
      			jQuery("#inventory_details_width_"+item.id).val(item.width);
      			jQuery("#inventory_details_high_"+item.id).val(item.high);
      			jQuery("#inventory_details_goodsSerial_"+item.id).val(item.goodsSerial); 
      			jQuery.ajax({
      				type: "POST",
      		        url: "$!webPath/seller/query_photo.htm",
      		        data: {img_id:item.img_id},
      		        async: false,
      		        success: function(data1) {
      		        	if(data1 != ""){
      		        		jQuery.each(eval(data1),function(index,item1){
      		        			jQuery("#"+item.id).append("<li style='width:46px'><span class='' ><img img_id="+item1.id+" style='width:46px;height:46px'  src='"+item1.img+"' /></span></span><span class='upload_pictures_bottom_del'><a href='javascript:void(0)' onclick='del_goods_image("+item1.id+",this)'><img src='$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png'  title='删除图片文件' /></a></li>");
      		        			if(jQuery("#"+item.id).children().size()>=8)
      		        				jQuery(".show_spec_img_"+item.id).hide();	
    						  }) 
      		        	}
      		        }
      			})
      			if(item.goodsDisabled == 1){
      				disable(item.id);
      			}
      			jQuery("#inventory_details_img_"+item.id).val(item.img_id);

	     });
		  if(jQuery("#inventory_detail_content>table").height()>=350){
	   	 	jQuery("#inventory_detail_content").css({"width":"1050px","height":"350px","overflow":"auto"});
		  }else{
	     	jQuery("#inventory_detail_content").css({"width":"1050px","height":"auto","overflow":"auto"});
	      }	
		  jQuery("#specSelect").hide();
		  jQuery(".spec_price").hide();
    },"text"); 
   
   
  #end
  #if($!obj.goods_property)
  var data='$!obj.goods_property';
  var properties=eval("("+data+")");
  jQuery.each(properties,function(index,item){
      jQuery("#property_"+item.id).val(item.val);
  });
  #end
  
  
/* form表单验证   jQuery.validator.addMethod("positiveinteger", function(value, element) {
	  var aint=parseInt(value);
	  return aint>0&& (aint+"")==value;
	  },); */
  
 jQuery.validator.addMethod("verify",function(value,element){
	 var re =  /^([0-9a-zA-Z]|[\u4E00-\u9FA5])+$/;
     if(re.test()){			
		return true;
  	} 
  	else {
    	return false;
	}
     
}); 
  //
  //表单验证
  
  
  jQuery("#theForm").validate({  
	  
	ignore: ":hidden",//不验证的元素
     rules: {
	    	 goods_serial:{
	    		 required:true,
	   		  	 verify:true,
		   		  remote:{
		  		    url: "$!webPath/verify_goodsSerial.htm",     //后台处理程序
		              type: "post",               //数据发送方式
		              dataType: "json",           //接受数据格式   
		              data: {                     //要传递的数据
		                    "goods_serial": function(){return jQuery("#goods_serial").val()},
		                    "id": function(){return jQuery("#goods_id").val()},
		                    "store_id": function(){return jQuery("#store_id").val()}
		  		     }
		  			}
			},
	        goods_class_id:{
			     required:true
			},
			goods_price:{
				 required:true,
				 number:true,
				 range:[0.01,1000000] 
			},
			store_price:{
				 required:true,
				 number:true,
				 range:[0.01,1000000] 
			},
			goods_name:{
			     required:true,
				 minlength:3,
				 maxlength:900
			    },
			features_one:{
				maxlength:100
			},
			features_two:{
				maxlength:100
			},
			features_three:{
				maxlength:100
			},
			features_four:{
				maxlength:100
			},
			features_five:{
				maxlength:100
			},
			goods_high:{
				
				required:true,
				number:true
				},	
			goods_length:{
				required:true,
				number:true
			},
			goods_width:{
				required:true,
				number:true
			},	
			goods_inventory:{
				required:true,
				number:true
			},			
			 transport_id:{transportId:true},
			 f_code_profix:{f_code_profix:true,rangelength:[1,4],profix:true},
			 f_code_count:{f_code_count:true,min:1,max:100000},
			 delivery_area_id:{required:true}
			},
			
     messages: {
	        goods_class_id:{required:"商品分类不能为空"},
			goods_serial:{
			    required: "SKU不能为空",
			    remote:"SKU重复"		   
			  },
			goods_name:{
			    required: "商品名不能为空",
			    minlength:"商品名最少为3个字符",
			    maxlength:"商品名最长不超300英文字符"			   
			  },
			features_one:{
				 maxlength:"亮点最长不超过100个字符"
			},
			features_two:{
				maxlength:"亮点最长不超过100个字符"		
						},
			features_three:{
				maxlength:"亮点最长不超过100个字符"			
						},
			features_four:{
				maxlength:"亮点最长不超过100个字符"			
						},
			features_five:{
				maxlength:"亮点最长不超过100个字符"		
						},
			goods_price:{
			    required:"商品原价不能为空",
				number:"商品原价只能是数字格式",
				range:"商品价格只能在0.01-1000000之间"
				},
			goods_volume:{
				number:"只能输入小数及整数"
				},	
			goods_high:{
				required: "商品尺寸不能为空",
				number:"只能输入小数及整数"
				},	
			goods_length:{
				required: "商品尺寸不能为空",
				number:"只能输入小数及整数"
			},
			goods_width:{
				required: "商品尺寸不能为空",
				number:"只能输入小数及整数"
			},	
			store_price:{
				number:"折后价格只能是数字格式",
				range:"折后价格只能在0.01-1000000之间"
				},
			goods_inventory:{
			    number:"商品库存只能为数字",
				range:"商品库存数量只能在0-1000000000之间"
			},
			transport_id:{transportId:"请选择一个运费模板"},
			f_code_profix:{f_code_profix:"请输入F码前缀",rangelength:"F码前缀长度为{0}位-{1}位"},
			f_code_count:{f_code_count:"F码数量不能为空",min:"F码数量最小为1",max:"F码数量最大为100000"},
			delivery_area_id:{required:"发货地址不能为空"}
		  }
		 
  }); 
  //
  jQuery(":input[id^=inventory_details_count_]").live("keyup",function(){
     var goods_inventory=0;
	 jQuery(":input[id^=inventory_details_count_]").each(function(){
		var reg = new RegExp("^[0-9]*$");
		if(!reg.test(jQuery(this).val())){
		    jQuery(this).val("0");
		}
		goods_inventory=parseInt(jQuery(this).val())+goods_inventory;
	 });
	 jQuery("#goods_inventory").val(goods_inventory);
  });
   //
  jQuery(":input[id^=inventory_details_price_]").live("keyup",function(){
	 jQuery(":input[id^=inventory_details_price_]").each(function(){
	 jQuery(this).val(jQuery(this).val().replace(/[^0-9.]/g,''));    
	 });
  });
  
      //物流运费
  jQuery("#buyer_transport_info").find("input[type='text']").live("keyup",function(){
	 jQuery(":input[id='mail_trans_fee']").each(function(){
		 jQuery(this).val(jQuery(this).val().replace(/[^0-9.]/g,''));    
	 });
  });
  
  
  //
/*   jQuery(":radio[id=inventory_type]").click(inventory_type);
  jQuery(":checkbox[id^=spec_]").click(inventory_type); */
  jQuery(":radio[id=inventory_type]").click(spec_hide_show);
  //
  #if($!store.grade.add_funciton)
  editor = KindEditor.create('#goods_details_web',options1);
  editor2 = KindEditor.create('#goods_details_app',options2);
  #end
  //goods_transfee
  jQuery(":radio[id='goods_transfee']").click(function(){
     var val=jQuery(this).val();
	 if(val==0){
	    jQuery("#buyer_transport_info").show();
	  }else{
	    jQuery("#buyer_transport_info").hide();
	  }
  }); 
  //
  jQuery("select[id^=ugc_id_]").live("change",function(){
     var the_ugc_id=jQuery(this).attr("id");
	 var the_val=jQuery(this).val();
	 if(the_val!=""){
	 jQuery("select[id!="+the_ugc_id+"]").each(function(){
	   if(jQuery(this).val()==the_val){
	     showDialog("msg_info","","已经存在该分类！",2,"warning",3,'');
		 jQuery("#"+the_ugc_id).val("");
	   }	   
	 });
	 }
  });
  //
  jQuery('#publish_day').attr("readonly","readonly").datepicker({
	  dateFormat:"yy-mm-dd",
	  minDate:1,
	  changeMonth: true,
	  changeYear: true
  });
  //
    jQuery('#advance_date').attr("readonly","readonly").datepicker({
	  dateFormat:"yy-mm-dd",
	  minDate:1,
	  changeMonth: true,
	  changeYear: true
  });
  //
  jQuery(":radio[id=publish_goods_status]").click(function(){
    if(jQuery(this).val()==2){
	   jQuery("#publish_info").show();
	   jQuery("#publish_day").show();
	 }else{
       jQuery("#publish_info").hide();
	   jQuery("#publish_day").hide();
	 }
  });
  //
  jQuery(":radio[id=f_sale_type]").click(function(){
     if(jQuery(this).val()==1){
	   jQuery("tr[id^=f_code_]").show();
	 }else{
	   jQuery("tr[id^=f_code_]").hide();
	 }
  });
  //
  jQuery(":radio[id=advance_sale_type]").click(function(){
     if(jQuery(this).val()==1){
	   jQuery("tr[id^=advance_sale_]").show();
	 }else{
	   jQuery("tr[id^=advance_sale_]").hide();
	 }
  });
  //
  	jQuery("#toTop").click(function(){
       jQuery('body,html').animate({scrollTop:0},1000);
       return false;
    });
	//
  jQuery(".seller_right_nav_center a").click(function(){
	var target_id = jQuery(this).attr("target_id");
	if(target_id!=""){
	   var top = jQuery("tr[id="+target_id+"]").offset().top-2;
	   jQuery('body,html').animate({scrollTop:top},1000);
	  }
  });
  //
   jQuery("select[id^=area]").change(function(){
     var level=jQuery(this).attr("level");
	 var id=jQuery(this).val();
	 jQuery("#delivery_area_id").val("");
	 for(var i=4;i>level;i--){
	  jQuery("#area"+i).empty();
	  jQuery("#area"+i).append("<option value=''>请选择</option>");
	 }
	 if(id!=""){
	  jQuery.post("$!webPath/load_area.htm",{"pid":id},function(data){
	     jQuery("#area"+level).empty();
		  jQuery("#area"+level).append("<option value=''>请选择</option>");
	      jQuery.each(data, function(index,item){
		    jQuery("#area"+level).append("<option value='"+item.id+"'>"+item.areaName+"</option>");
		  });
	  },"json");
	 }else{
	   for(var i=level;i<=4;i++){
	    jQuery("#area"+i).empty();
	   }
	 }
  });
 //
 jQuery("#area3").change(function(){
   var id=jQuery(this).val();
   jQuery("#delivery_area_id").val(id);
 });
 //页面导航样式变化
  var list=new Array();	
  jQuery(".seller_right_nav_center a").each(function(){
     var target_id=jQuery(this).attr("target_id");
	 list.push(target_id);
  });	
  jQuery(window).scroll(function(){						 
	 var top = jQuery(document).scrollTop();
	for(var i=0;i<list.length;i++){
		if(list[i]!=""){
				  var _top1=jQuery("tr[id="+list[i]+"]").offset().top-top;
				  var _top2=jQuery("tr[id="+list[i+1]+"]").offset().top-top;
				  if(_top1<100&&_top2>0){
					jQuery(".seller_right_nav_center a").removeClass("this");  
					jQuery("a[target_id="+list[i]+"]").addClass("this");
				  }
		}
	}
  });
  //
});

function spec_hide_show(){
	 var rv=jQuery(":radio[id=inventory_type][checked=true]").val();
	if(rv=="all"){
		 jQuery("#specSelect").hide(); 
		 jQuery("#inventory_detail_content").empty(); 
		 jQuery("#inventory_detail").hide();
		 jQuery(".spec_price").show();
	  }else{
		  if(rv=="spec")
				 jQuery(".spec_price").hide();
				 jQuery("#specSelect").show(); 
	  }
}
//[点击确认编辑详细规格表]
function specOk(){
	 jQuery("#goods_price").val("0");
	 jQuery("#store_price").val("0");
	 jQuery("#goods_inventory").val("0");
	 jQuery("#goods_weight").val("0");
	 jQuery("#goods_length").val("0");
	 jQuery("#goods_width").val("0");
	 jQuery("#goods_high").val("0");
	 var rv=jQuery(":radio[id=inventory_type][checked=true]").val();
	 var spec_rv =  jQuery(":checkbox[id^=spec_][checked=true]").val();
	 if(spec_rv == null && spec_rv == undefined ){
		 alert("请选择规格")
	 }else{
		 jQuery("#specSelect").hide();
		 jQuery(".spec_price").hide();
	 	 var rv=jQuery(":radio[id=inventory_type][checked=true]").val();
	   	 if(rv=="all"){
			 jQuery("#specSelect").hide(); 
			 jQuery("#inventory_detail_content").empty(); 
			 jQuery("#inventory_detail").hide();
		  }else{
			
		  var goods_spec_ids="";
		  jQuery(":checkbox[id^=spec_][checked=true]").each(function(){
		     goods_spec_ids=jQuery(this).val()+","+goods_spec_ids;
		  });
		  if(goods_spec_ids!=""){
		   jQuery.post("$!webPath/seller/goods_inventory.htm",{"goods_spec_ids":goods_spec_ids},function(data){
		     jQuery("#inventory_detail_content").append(data);	
			 jQuery("#inventory_detail").show();
			 var inventory_detail='$!obj.goods_inventory_detail';
		     var goods_inventory_detail=eval("("+inventory_detail+")");
		     jQuery.each(goods_inventory_detail, function(index,item){
		    		jQuery("#inventory_details_count_"+item.id).val(item.count);
		  	        jQuery("#inventory_details_price_"+item.id).val(item.price);
		  			jQuery("#inventory_details_supplement_"+item.id).val(item.supp);
		  			jQuery("#inventory_details_weight_"+item.id).val(item.weight);
		  			jQuery("#inventory_details_length_"+item.id).val(item.length);
		  			jQuery("#inventory_details_width_"+item.id).val(item.width);
		  			jQuery("#inventory_details_high_"+item.id).val(item.high);
		  			jQuery("#inventory_details_goodsSerial_"+item.id).val(item.goodsSerial);
		  			jQuery.ajax({
		  				type: "POST",
		  		        url: "$!webPath/seller/query_photo.htm",
		  		        data: {img_id:item.img_id},
		  		        async: false,
		  		        success: function(data1) {
		  		        	if(data1 != ""){
		  		        		jQuery.each(eval(data1),function(index,item1){
		  		        			jQuery("#"+item.id).append("<li style='width:46px'><span class='' ><img img_id="+item1.id+" style='width:46px;height:46px'  src='"+item1.img+"' /></span></span><span class='upload_pictures_bottom_del'><a href='javascript:void(0)' onclick='del_goods_image("+item1.id+",this)'><img src='$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png'  title='删除图片文件' /></a></li>");
		  		        			if(jQuery("#"+item.id).children().size()>=8)
		  		        				jQuery(".show_spec_img_"+item.id).hide();	
								  }) 
		  		        	}
		  		        }
		  			})
		  			if(item.goodsDisabled == 1){
		  				disable(item.id);
		  			}
		  			jQuery("#inventory_details_img_"+item.id).val(item.img_id);
		  			});
		    
			 if(jQuery("#inventory_detail_content>table").height()>=350){
			    jQuery("#inventory_detail_content").css({"width":"1050px","height":"350px","overflow":"auto"});
			  }else{
			    jQuery("#inventory_detail_content").css({"width":"1050px","height":"auto","overflow":"auto"});
			  }	
		    },"text");
		  }else{
		     jQuery("#inventory_detail").hide();
		  }
		} 
}
}

//修改规格
function specEdit(){
	 jQuery("#specSelect").show();
	 jQuery("#inventory_detail").hide();
	 jQuery("#inventory_detail_content").empty();
}
/*Ajax分页*/
function ajaxPage(url,currentPage,obj){
  var ajax_page=jQuery(obj).parent().attr("ajax_page");
  if(ajax_page=="goods_transport"){
     jQuery.post("$!webPath/seller/goods_transport.htm",{"currentPage":currentPage,"ajax":true},function(data){
         jQuery("#ListForm").empty().html(data);
      },"html");
  }else if(ajax_page=="goods_img"){
     var ajax_type=jQuery(obj).parent().attr("ajax_type");
     var type=jQuery(obj).parent().attr("type");
	 var album_id=jQuery(obj).parent().attr("album_id");
     jQuery.post("$!webPath/seller/goods_img.htm",{"currentPage":currentPage,"type":type,"album_id":album_id},function(text){
       jQuery(ajax_type).empty();
	   jQuery(ajax_type).append(text);
     },"text");

  }else if(ajax_page=="goods_album"){
	  var ajax_type=jQuery(obj).parent().attr("ajax_type");
     jQuery.post("$!webPath/seller/goods_album.htm",{"currentPage":currentPage,"ajax_type":ajax_type},function(text){
       jQuery(ajax_type).empty();
	   jQuery(ajax_type).append(text);
     },"text");
  }
}
/*表单提交*/
function saveForm(){
	#if($!store.grade.add_funciton)
  	editor.sync();//同步编辑器的数据到texterea
  	editor2.sync();
  	#end
	/*商品图片处理*/
	var image_ids="";
	var main_image_id="";
	
	jQuery(".upload_pictures_bottom_i img").each(function(index, element) {
		
        var image_id=jQuery(element).attr("img_id");
		if(index==0){
			main_image_id=image_id;
		}else{
			image_ids=image_ids+","+image_id;
		}
		
    });	
	if(image_ids=="" && main_image_id==""){
	   showDialog("warning","","请至少上传一张商品图片！",2,"warning",3);
	}else{
	jQuery("#image_ids").val(image_ids);
	jQuery("#goods_main_img_id").val(main_image_id);
	
	
	var user_class_ids="";
	jQuery("select[id^=ugc_id_]").each(function(){
	 if(jQuery(this).val()!=""){
	   user_class_ids=jQuery(this).val()+","+user_class_ids;
	 }
	});
	jQuery("#user_class_ids").val(user_class_ids);
	var goods_spec_ids="";
	jQuery(":checkbox[id^=spec_][checked=true]").each(function(){
	 goods_spec_ids=jQuery(this).val()+","+goods_spec_ids;
	});
	
	jQuery("#goods_spec_ids").val(goods_spec_ids);
	var goods_properties="";
	jQuery("select[id^=property_]").each(function(){
	if(jQuery(this).val()!=""){
	   goods_properties=jQuery(this).attr("id").substring(9)+","+jQuery(this).val()+";"+goods_properties;
	}
	
	});
	jQuery("#goods_properties").val(goods_properties);
	var intentory_details="";
	//[拼接详细规格字符串]
	jQuery("input[id^=inventory_details_count_]").each(function(){
	 var id=jQuery(this).attr("name");
	 var count=jQuery(this).val();
	 var price=jQuery("#inventory_details_price_"+id).val();
	 var supp=jQuery("#inventory_details_supplement_"+id).val();
	 var img_id=jQuery("#inventory_details_img_"+id).val();
	 
	 var weight=jQuery("#inventory_details_weight_"+id).val();
	 var length=jQuery("#inventory_details_length_"+id).val();
	 var width=jQuery("#inventory_details_width_"+id).val();
	 var high=jQuery("#inventory_details_high_"+id).val();
	 var goodsSerial=jQuery("#inventory_details_goodsSerial_"+id).val();
	 var goodsDisabled=jQuery("#inventory_details_goodsDisabled_"+id).val();
	 intentory_details=id+","+count+","+supp+","+price+","+img_id+","+weight+","+length+","+width+","+high+","+goodsSerial+","+goodsDisabled+";"+intentory_details;
	});
	jQuery("#intentory_details").val(intentory_details);
	jQuery("#theForm").submit();
	var a = jQuery("#theForm").validate();
	if(a.valid()){
		jQuery("#save").attr("disabled","disabled");
	}
	}
	
}<!--end-->
function switch_detail_editor(str){
	jQuery("a[id^='detail_']").removeClass("this");
	jQuery("#detail_"+str).addClass("this");
	
	jQuery("#goods_details_div_web").hide();
	jQuery("#goods_details_div_app").hide();
	jQuery("#goods_details_div_"+str).show();	
	if(str=="app"){
		jQuery("#goods_details_div_app_content").show();
	}else{
		jQuery("#goods_details_div_app_content").hide();
	}
}
//商品图片删除
function del_goods_image(img_id,obj){
	
  if(confirm("删除后不可恢复，是否继续？")){	
	jQuery.post("$!webPath/seller/goods_image_del.htm",{"image_id":img_id},function(data){
	    if(data.result==true){
		  if(data.remainSpace!="null"){
				if(data.remainSpace>0){
					/*空间还剩多少*/
					jQuery("#img_remain_size").html("图片空间剩余: <b style='color:#F00'>"+data.remainSpace+"</b> MB");
				}
				if(data.remainSpace<=0){
					/*空间不足*/
					jQuery("#img_remain_size").html("<b style='color:#F00'> 空间不足 </b>");
				}
				
			 }else{
				  jQuery("#img_remain_size").html("空间大小不受限制");
			}
		  
			  var parents=jQuery(obj).parents(".parents_spec");
			  
			  
			  jQuery(obj).parents('li').remove();
			  var img_len=parents.find('img[img_id]').length
			  var img_ids='';
			  var imgs=parents.find('img[img_id]');
			  imgs.each(function(index,element){
				  img_ids+=jQuery(element).attr('img_id')+"_";
			  })
			  
			 parents.siblings('ul').find('.img_src').val(img_ids);
			draw_goods_main_img();
			
			var img_mark= parents.siblings('ul').find('input[type=file]');
			
			
			if(img_len<8) img_mark.parents('ul').show();
			jQuery(".add_img").show();
		}else showDialog("msg_info","","删除失败！",2,"warning",3,'');
	},"json");
  }				   
}
function remove_goods_image(obj){
	jQuery(obj).parent().parent().remove();
	draw_goods_main_img();
	jQuery(".add_img").show();
}
//根据传入新图片的URL，绘制下方小图。
function  draw_goods_img(img_url,img_id){
	if(jQuery("#show_img").children().size()==8) {alert("最多可选择8张商品图片"); return;}
	jQuery("#show_img").append("<li><span class='upload_pictures_bottom_i'><img src='"+img_url+"' img_id='"+img_id+"' title='可拖动' /></span><span class='upload_pictures_bottom_del'><a href='javascript:void(0)' onclick='del_goods_image("+img_id+",this)'><img src='$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png'  title='删除图片文件' /></a><a href='javascript:void(0)' onclick='remove_goods_image(this)'><img src='$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png' title='删除图片数据' /></a></span></li>");
	draw_goods_main_img();
	if(jQuery("#show_img").children().size()>=8) jQuery(".add_img").hide();	
}
/*绘制商品主图*/
function  draw_goods_main_img(){
	if(jQuery("#show_img").children().size()==0){
		jQuery(".upload_pictures_top_img img").attr("src",null);
	}else if(jQuery("#show_img").children().size()>=1){
		var img_url=jQuery(".upload_pictures_bottom_i img").attr("src");
		jQuery(".upload_pictures_top_img img").attr("src",img_url);
	}
}
//商品图片ajax上传
function upload_goods_img(){
	jQuery(".add_img").removeClass("add_img").addClass("add_loading");
	jQuery.ajaxFileUpload({url:'$!webPath/seller/swf_upload.htm',
								  dataType:'json',
								  fileElementId:['imgFile'],
								  fileFilter:"$!imageSuffix1",
								  success:function(data){		
								  	if(data.remainSpace!="null"){
										if(data.remainSpace>0){
											/*空间还剩多少*/
											jQuery("#img_remain_size").html("图片空间剩余: <b style='color:#F00'>"+data.remainSpace+"</b> MB");
										}
										if(data.remainSpace<=0){
											/*空间不足*/
											jQuery("#img_remain_size").html("<b style='color:#F00'>空间不足</b>");
										}										
									}else{
										jQuery("#img_remain_size").html("空间大小不受限制");
									}		
									if(data.id!=""){
										jQuery(".add_loading").removeClass("add_loading").addClass("add_img");
										draw_goods_img(data.url,data.id);
									}else{
										showDialog("msg_info","","上传失败！",2,"warning",3,'');
									}		 					
								  },
		});
}


function add_goods_spec_property(){
	count++;
	 var goods_spec_property_img="<tr id='goods_spec_'><td width='100'><span class='size70'><input name='sequence_count' id='sequence_count' value='' type='text'></span></td><td width='271'><span class='size200'><input name='value_count' id='value_count' value='' type='text'></span></td><td class='liul' width='558'><span id='goods_spec_property_img_' class='size13'><input name='textfield_count' id='textfield_count' type='text'></span> <span class='filebtn' id='goods_spec_property_img_'><input name='button' id='button1' value='' type='button'></span> <span id='goods_spec_property_img_' style='float:left;' class='file'><input name='specImage_count' id='specImage_count' size='30' type='file' onchange='change_img(this);'></span><span id='goods_spec_property_img_' class='seller_spec'><img id='image_count' name='image_count' src='$!webPath/resources/style/common/images/transparent.gif' height='16' width='16'></span></td><td class='hui oprate_con' align='center' width='116'><a href='javascript:void(0);' onclick='remove_goods_spec_property(this.parentNode.parentNode,\"\")'>删除</a></td></tr>";
	  var goods_spec_property_text="<tr id='goods_spec_'><td width='100'><span class='size70'><input name='sequence_count' id='sequence_count' value='' type='text'></span></td><td width='271'><span class='size200'><input name='value_count' id='value_count' value='' type='text'></span></td><td class='liul' width='558'><span id='goods_spec_property_img_' style='display:none;' class='size13'><input name='textfield_count' id='textfield_count' type='text'></span> <span class='filebtn' id='goods_spec_property_img_'  style='display:none;'><input name='button' id='button1' value='' type='button'></span> <span id='goods_spec_property_img_'  style='float:left;display:none;' class='file'><input name='specImage_count' id='specImage_count' size='30' type='file'  onchange='change_img(this);'></span><span id='goods_spec_property_img_'  style='display:none;' class='seller_spec'><img   id='image_count' name='image_count' src='$!webPath/resources/style/common/images/transparent.gif' height='16' width='16'></span></td><td class='hui oprate_con' align='center' width='116'><a href='javascript:void(0);' onclick='remove_goods_spec_property(this.parentNode.parentNode,\"\")'>删除</a></td></tr>";
	  var type=jQuery(":radio:checked").val();
	  if(type=="img"){
	    jQuery(".fshop_table2 tr[id^=goods_spec_]").last().after(goods_spec_property_img.replace(/count/g,count));
	  }else{
	    jQuery(".fshop_table2 tr[id^=goods_spec_]").last().after(goods_spec_property_text.replace(/count/g,count));
	  }
	}
	
/* 点击设置 */
function spec_info(){
	 showdiv();
}

function showdiv(){
	  $('#my_dialog').dialog({
		  modal:true,
		  width:"500",
  	 	  height:"400"
	  	});
	document.getElementById("my_dialog").style.display="block";
};


jQuery(":radio[id='publish_goods_status'][value='$!{obj.publish_goods_status}']").attr("checked",true);
/* jQuery(":radio[id='site'][value='$!{obj.site}']").attr("checked",true); */
jQuery(":radio[id='number_days'][value='$!{obj.number_days}']").attr("checked",true);
</script>
</head>
<body>
	$!httpInclude.include("/seller/top.htm")
	<div class="main">
		<!--   <div class="seller_right_nav">
    <div class="seller_right_nav_center">
      <ul>
        <li class="seller_right_nav_top">页面导航</li>
        <li><a href="javascript:void(0);" target_id="goods_base">基本信息</a></li>
        <li><a href="javascript:void(0);" target_id="goods_detail">详情描述</a></li>
        <li><a href="javascript:void(0);" target_id="goods_pack">包装售后</a></li>
        <li><a href="javascript:void(0);" target_id="goods_spec">特殊商品</a></li>
        <li><a href="javascript:void(0);" target_id="goods_format">商品版式</a></li>
        <li><a href="javascript:void(0);" target_id="goods_other">其他信息</a></li>
        <li class="seller_right_nav_backtop"><a href="javascript:void(0);" id="toTop" target_id="">返回顶部</a></li>
      </ul>
    </div>
  </div> -->
		<div class="seller_center">
			<div>
				<a href="$!webPath/seller/index.htm">商家中心</a>><span>商品管理</span>><span>添加新商品</span>
			</div>
			<div class="navdetail">
				<span class="navadd1 addcolor">选择商品所在分类</span> <span
					class="navadd2 white">填写商品详细信息</span> <span
					class="navadd3 addcolor">商品发布成功</span>
			</div>
			<div class="adddetail">
				<form action="$!webPath/seller/add_goods_finish.htm" method="post"
					enctype="multipart/form-data" name="theForm" id="theForm">
					<table width="100%" border="0" cellspacing="0" cellpadding="0"
						class="tabledetail">
						<tr id="goods_base">
							<td colspan="2" class="tableh1">基本信息 <input name="id"
								type="hidden" id="id" value="$!obj.id" /></td>
						</tr>
						<tr>
							<td width="18%" align="right"><strong class="redstr">*</strong>商品分类：</td>
							<td><span>$!goods_class_info</span><span class="editbtn">
									<input name="goods_class_id" type="hidden" id="goods_class_id"
									value="$!{goods_class.id}" /> <input name="user_class_ids"
									type="hidden" id="user_class_ids" /> <input
									name="goods_spec_ids" type="hidden" id="goods_spec_ids" /> <input
									name="goods_properties" type="hidden" id="goods_properties" />
									<input type="hidden" name="intentory_details"
									id="intentory_details" /> <input name="edit_class"
									type="button" id="edit_class" value="编辑"
									style="cursor: pointer;"
									onclick="window.location.href='$!webPath/seller/add_goods_first.htm?id=$!{obj.id}'" />
							</span></td>
						</tr>
						<tr>

							<!-- 商品货号 -->
							<td align="right" valign="top"><strong class="redstr">*</strong>SKU：</td>
							<td class="sptable"><span class="tabtxt1 size2"> <input
									name="goods_serial" type="text" id="goods_serial"
									value="$!obj.goods_serial" style="width: 200px;" />
							</span><span class="hui2">SKU只能由英文和中文组成</span> <!-- <span class="hui2">
              <ul class="tableli">
                <li>商品货号是指商家个人管理商品的编号，买家不可见</li>
                <li>最多可输入20个字符，支持输入中文、字母、数字、_、/、-和小数点</li>
              </ul>
              </span> --></td>
						</tr>
						<tr>
							<td align="right" valign="top"><strong class="redstr">*</strong>商品名称：</td>
							<td class="sptable"><span class="tabtxt1 size1"> <input
									name="goods_name" type="text" id="goods_name"
									value="$!obj.goods_name" />
							</span><span class="hui2">商品标题名称长度至少3个字符，最长100个英文字母</span></td>
						</tr>

						<tr style="display: none;">
							<td align="right" valign="top">商品类型：</td>
							<td class="sptable"><label> <input
									name="goods_choice_type" type="radio" id="goods_choice_type"
									value="0" checked="checked" /> 实物商品
							</label> <label> <input type="radio" name="goods_choice_type"
									id="goods_choice_type" value="1" /> 虚拟商品
							</label> <span class="hui2">充值卡、消费券等属于虚拟商品</span></td>
						</tr>
						<tr style="display: none;">
							<td align="right" valign="top">货到付款：</td>
							<td class="sptable"><label> <input name="goods_cod"
									type="radio" id="goods_cod" value="0" checked="checked" /> 支持
							</label> <label> <input type="radio" name="goods_cod"
									id="goods_cod" value="-1" /> 不支持
							</label> <span class="hui2">该商品是否支持货到付款</span></td>
						</tr>
						<tr style="display: none;">
							<td align="right" valign="top">增值税发票：</td>
							<td class="sptable"><label> <input
									name="tax_invoice" type="radio" id="tax_invoice" value="1"
									checked="checked" /> 支持
							</label> <label> <input type="radio" name="tax_invoice"
									id="tax_invoice" value="0" /> 不支持
							</label> <span class="hui2">该商品是否可以开具增值税发票</span></td>
						</tr>


						<!-- #if($!goods_spec_list.size()>0)
      		<script>
      	jQuery(".pri").show();
      	</script>
      	#else
      	<script>
      	jQuery(".pri").hide();
      	</script>
      	#end -->


						<!--  <script>
          function spec_add(id){
	    		 jQuery.ajax({
	    			type:'POST',
	    	      	url:'$!webPath/seller/goods_spec_set.htm',
	    		  	data:{"id":id},
	    	   		success:function(data){
					jQuery("#gsp_detail").html("");
					jQuery.each(eval(data),function(index,item){
					jQuery("#gsp_detail").append("<li><span class='cc_sp1'><input name=spec_"+item.id+" id=spec_"+item.id+" gs_id="+$!gs.id+" gsp_val="+item.name+" type='checkbox' value="+item.id+" /></span></li><label for= spec_"+item.id+"><span class='cc_sp3'>"+item.name+"</span></label>");
						});
	    	 		}
	    		}); 
        		 showdiv();
        	}
          </script> -->

						#if($!goods_spec_list.size() > 0)

						<tr>
							<td align="right" valign="top">规格选择：</td>
							<td class="sptable"><label> <input
									name="inventory_type" id="inventory_type" type="radio"
									value="all" checked="checked" /> 单规格配置
							</label> <label> <input type="radio" name="inventory_type"
									id="inventory_type" value="spec" /> 多规格配置
							</label> <span class="hui2"> <!--  <ul class="tableli">
	                <li>单规格表示单独库存、价格配置</li>
	                <li>多规格需要配置对应属性的库存、价格</li>
	              </ul> -->
							</span></td>
						</tr>
						#else
						<tr style="display: none">
							<td><input name="inventory_type" id="inventory_type"
								type="radio" value="all" checked="checked" /></td>
						</tr>
						#end
						<tr id="specSelect" style="display: none">
							<td align="right" valign="top" style="position: relative;">
								<p>选择规格：</p> <!--  <input type="button" value="新增" style="width:50px; cursor:pointer;" onclick='spec_add($!{gs.id})'/> -->
								<input type="button" value="生成商品" onclick="specOk()"
								style="position: absolute; bottom: 5px; right: -1010px; cursor: pointer; border: none; width: 70px; height: 24px; background: url($!webPath/resources/style/system/front/default/images/usercenter/edit.jpg) no-repeat;" />

							</td>
							<td class="sptable"
								style="padding-top: 0px; padding-bottom: 35px;">
								#foreach($gs in $goods_spec_list)
								<div id="gs_$!{gs.id}" gs_name="$!{gs.name}"
									style="border-top: 1px solid #ebebeb; margin-top: -1px;">
									<p
										style="height: 30px; line-height: 30px; font-size: 14px; width: 100%;">$!{gs.name}：</p>
									<ul
										style="padding: 5px 0; display: flex; justify-content: flex-start; width: 100%; flex-wrap: wrap;">
										#foreach($gsp in $!gs.properties)
										<!--     
		                 #if($!{velocityCount} == 1)
		                	<script>
		                jQuery(document).ready(function(){
		                	  jQuery(":checkbox[id=spec_$!{gsp.id}]").prop('checked',true);
		                	   });
		                	</script>
		                
		                #end  -->
										<li
											style="margin-right: 10px; min-width: 60px; margin-bottom: 10px; display: flex; justify-content: flex-start;">
											<span class="cc_sp1" style="margin-right: 5px;"> <input
												name="spec_$!{gsp.id}" type="checkbox" id="spec_$!{gsp.id}"
												gs_id="$!gs.id" gsp_val="$!gsp.value" value="$!gsp.id" />
										</span> <label for="spec_$!{gsp.id}"> #if($!gs.type=="img") <span
												class="cc_sp2"> <img
													src="$!imageWebServer/$!{gsp.specImage.path}/$!{gsp.specImage.name}"
													width="16" height="16" />
											</span> #end <span class="cc_sp3">$!gsp.value</span>
										</label>
										</li> #end
									</ul>
								</div> #end
							</td>
						</tr>


						<tr id="inventory_detail" style="display: none;">
							<td align="right" valign="top" style="position: relative;">
								<div>详细库存：</div>
								<div
									style="position: absolute; top: 10px; right: -1010px; width: 1000px">
									<p style="float: left;">注意：批量修改支持加法（“+”）、减法（“-”）操作，例如在批量管理输入框内输入“+20”，确认后该列所有数值全部增加20。</p>
									<input type="button" value="修改规格" onclick="specEdit()"
										style="float: right; cursor: pointer; border: none; width: 70px; height: 24px; background: url($!webPath/resources/style/system/front/default/images/usercenter/edit.jpg) no-repeat;" />
								</div>
							</td>
							<td class="sptable">
								<div id="inventory_detail_content"
									style="margin-top: 30px; width: 1050px; height: auto; overflow: auto;"></div>
							</td>
						</tr>


						<tr class="spec_price">
							<td align="right" valign="top"><strong class="redstr">*</strong>商品原价：</td>
							<td class="sptable"><span class="element_center"> <input
									name="goods_price" type="text" id="goods_price"
									value="$!obj.goods_price" /> <i class="element">AED</i></span> </span> <!-- <span class="element_tipe">商品原价必须是0.01~1000000之间的数字</span> --></td>
						</tr>
						<tr class="spec_price">
							<td align="right" valign="top">折后价格：</td>
							<td class="sptable"><span class="element_center"> <input
									name="store_price" type="text" id="store_price"
									value="$!obj.store_price" /> <i class="element">AED</i>
							</span> <span class="hui2">
									<ul class="tableli">
										<li style="color: red">折后价格不能大于商品原价</li>
										<!--<li>折后价格必须是0.01~1000000之间的数字</li>
                <li>若启用了库存配置，请在下方商品库存区域进行管理</li>
                <li>商品规格库存表中如有价格差异，折后价格显示为价格区间形式</li>-->
									</ul>

							</span></td>
						</tr>
						<tr class="spec_price">
							<td align="right" valign="top">商品库存：</td>
							<td class="sptable"><span class="element_center"> <input
									name="goods_inventory" type="text" id="goods_inventory"
									value="$!obj.goods_inventory" /> <i class="element">件</i>
							</span> <span class="hui2"> <!-- <ul class="tableli">
                <li>商铺库存数量必须为1~1000000000之间的整数</li>
                <li>若启用了规格配置，则系统自动计算商品的总数，此处无需商家填写</li>
              </ul> -->
							</span></td>
						</tr>

						<tr class="spec_price">
							<td align="right" valign="top">商品重量：</td>
							<td class="sptable"><span class="element_center"> <input
									name="goods_weight" type="text" id="goods_weight"
									value="$!obj.goods_weight" /> <i class="element">g</i>
							</span></td>
						</tr>
						<tr class="spec_price">
							<td align="right" valign="top">商品体积：</td>
							<td class="sptable">
								<!-- <span class="element_center">
              <input name="goods_volume" type="text" id="goods_volume" value="$!obj.goods_volume" />
              <i class="element">cm</i> </span> -->
							</td>
						</tr>

						<tr class="spec_price">
							<td align="right" valign="top"><strong class="redstr">*</strong>长：</td>
							<td class="sptable"><span class="element_center"> <input
									name="goods_length" type="text" id="goods_length"
									value="$!obj.goods_length" /> <i class="element">cm</i>
							</span></td>
						</tr>

						<tr class="spec_price">
							<td align="right" valign="top"><strong class="redstr">*</strong>宽：</td>
							<td class="sptable"><span class="element_center"> <input
									name="goods_width" type="text" id="goods_width"
									value="$!obj.goods_width" /> <i class="element">cm</i>
							</span></td>
						</tr>

						<tr class="spec_price">
							<td align="right" valign="top"><strong class="redstr">*</strong>高：</td>
							<td class="sptable"><span class="element_center"> <input
									name="goods_high" type="text" id="goods_high"
									value="$!obj.goods_high" /> <i class="element">cm</i>
							</span></td>
						</tr>


						<tr style="display: none;">
							<td align="right" valign="top">预警数量：</td>
							<td class="sptable"><span class="element_center"> <input
									name="goods_warn_inventory" type="text"
									id="goods_warn_inventory" value="$!obj.goods_warn_inventory" />
									<i class="element">件</i>
							</span> <span class="hui2">
									<ul class="tableli">
										<li>预警数量必须为1~1000000000之间的整数</li>
										<li>库存少于预警数量，商品会以红色标题靠前显示</li>
									</ul>
							</span></td>
						</tr>



						<tr>
							<td align="right" valign="top">商品图片：</td>
							<script>
		    function photo_switch(clz,obj){	
			 if(clz=="tab_body_b"){
			 var album_id = jQuery(obj).attr("album_id");
			 jQuery.post("$!webPath/seller/goods_img.htm",{"type":"goods_img_album","album_id":album_id},function(text){
				jQuery(".tab_body_b").empty();
				jQuery(".tab_body_b").append(text);
			  },"text");
			 }
			 jQuery("."+clz).show();			  
			}
			function show_album(clz,obj){
				 jQuery(".tabbody_ul li").removeClass("this");
			 	 jQuery(obj).addClass("this");
				 jQuery(".tab_body_b").empty();
			 	 if(clz=="tab_body_b"){
			 		 jQuery.post("$!webPath/seller/goods_album.htm",{"ajax_type":".tab_body_b"},function(text){
				 	 jQuery(".tab_body_b").empty();
				 	 jQuery(".tab_body_b").append(text);
			       		 },"text");
				}		
			}	
		  </script>
							<td>
								<!--商品图片上传 -->

								<div class="tab_body">
									<ul class="tabbody_ul">
										<li class="this" style="cursor: pointer;"
											onclick="show_album('tab_body_a',this)">上传图片</li>
										<li style="cursor: pointer;"
											onclick="show_album('tab_body_b',this)">从用户相册选择</li>
									</ul>
									<div class="tabbodys">
										<div class="tab_body_b"></div>
										<div class="tab_body_a">
											<div class="upload_pictures">
												<div class="upload_pictures_top">
													<div class="upload_pictures_top_img">
														<img
															#if($!obj.goods_main_photo) src="$!imageWebServer/$!{obj.goods_main_photo.path}/$!{obj.goods_main_photo.name}"
															#end />
													</div>
												</div>
												<div class="upload_pictures_bottom">
													<ul id="show_img">
														#if($!obj.goods_main_photo)
														<li><span class="upload_pictures_bottom_i"><img
																src="$!imageWebServer/$!{obj.goods_main_photo.path}/$!{obj.goods_main_photo.name}"
																img_id="$!{obj.goods_main_photo.id}" title="可拖动" /></span> <span
															class="upload_pictures_bottom_del"> <a
																href="javascript:void(0)"
																onclick="del_goods_image('$!{obj.goods_main_photo.id}',this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png"
																	title="删除图片文件" /></a> <a href="javascript:void(0)"
																onclick="remove_goods_image(this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png"
																	title="删除图片数据" /></a>
														</span></li> #end #foreach($img in $obj.goods_photos)
														#if($velocityCount==1)
														#set($img2="$!imageWebServer/$!{img.path}/$!{img.name}")
														#set($img2_id="$!img.id")
														<li><span class="upload_pictures_bottom_i"><img
																src="$!{img2}" img_id="$!{img2_id}" title="可拖动" /></span> <span
															class="upload_pictures_bottom_del"> <a
																href="javascript:void(0)"
																onclick="del_goods_image('$!{img2_id}',this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png"
																	title="删除图片文件" /></a> <a href="javascript:void(0)"
																onclick="remove_goods_image(this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png"
																	title="删除图片数据" /></a>
														</span></li> #end #if($velocityCount==2)
														#set($img3="$!imageWebServer/$!{img.path}/$!{img.name}")
														#set($img3_id="$!img.id")
														<li><span class="upload_pictures_bottom_i"><img
																src="$!{img3}" img_id="$!{img3_id}" title="可拖动" /></span> <span
															class="upload_pictures_bottom_del"> <a
																href="javascript:void(0)"
																onclick="del_goods_image('$!{img3_id}',this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png"
																	title="删除图片文件" /></a> <a href="javascript:void(0)"
																onclick="remove_goods_image(this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png"
																	title="删除图片数据" /></a>
														</span></li> #end #if($velocityCount==3)
														#set($img4="$!imageWebServer/$!{img.path}/$!{img.name}")
														#set($img4_id="$!img.id")
														<li><span class="upload_pictures_bottom_i"><img
																src="$!{img4}" img_id="$!{img4_id}" title="可拖动" /></span> <span
															class="upload_pictures_bottom_del"> <a
																href="javascript:void(0)"
																onclick="del_goods_image('$!{img4_id}',this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png"
																	title="删除图片文件" /></a> <a href="javascript:void(0)"
																onclick="remove_goods_image(this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png"
																	title="删除图片数据" /></a>
														</span></li> #end #if($velocityCount==4)
														#set($img5="$!imageWebServer/$!{img.path}/$!{img.name}")
														#set($img5_id="$!img.id")
														<li><span class="upload_pictures_bottom_i"><img
																src="$!{img5}" img_id="$!{img5_id}" title="可拖动" /></span> <span
															class="upload_pictures_bottom_del"> <a
																href="javascript:void(0)"
																onclick="del_goods_image('$!{img5_id}',this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png"
																	title="删除图片文件" /></a> <a href="javascript:void(0)"
																onclick="remove_goods_image(this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png"
																	title="删除图片数据" /></a>
														</span></li> #end #if($velocityCount==5)
														#set($img6="$!imageWebServer/$!{img.path}/$!{img.name}")
														#set($img6_id="$!img.id")
														<li><span class="upload_pictures_bottom_i"><img
																src="$!{img6}" img_id="$!{img6_id}" title="可拖动" /></span> <span
															class="upload_pictures_bottom_del"> <a
																href="javascript:void(0)"
																onclick="del_goods_image('$!{img6_id}',this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png"
																	title="删除图片文件" /></a> <a href="javascript:void(0)"
																onclick="remove_goods_image(this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png"
																	title="删除图片数据" /></a>
														</span></li> #end #if($velocityCount==6)
														#set($img7="$!imageWebServer/$!{img.path}/$!{img.name}")
														#set($img7_id="$!img.id")
														<li><span class="upload_pictures_bottom_i"><img
																src="$!{img7}" img_id="$!{img7_id}" title="可拖动" /></span> <span
															class="upload_pictures_bottom_del"> <a
																href="javascript:void(0)"
																onclick="del_goods_image('$!{img7_id}',this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png"
																	title="删除图片文件" /></a> <a href="javascript:void(0)"
																onclick="remove_goods_image(this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png"
																	title="删除图片数据" /></a>
														</span></li> #end #if($velocityCount==7)
														#set($img8="$!imageWebServer/$!{img.path}/$!{img.name}")
														#set($img8_id="$!img.id")
														<li><span class="upload_pictures_bottom_i"><img
																src="$!{img8}" img_id="$!{img8_id}" title="可拖动" /></span> <span
															class="upload_pictures_bottom_del"> <a
																href="javascript:void(0)"
																onclick="del_goods_image('$!{img8_id}',this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png"
																	title="删除图片文件" /></a> <a href="javascript:void(0)"
																onclick="remove_goods_image(this)"><img
																	src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png"
																	title="删除图片数据" /></a>
														</span></li> #end #end
													</ul>
													<ul>
														<li class="add_img"#if($!obj.goods_photos.size()>=7)
															style="display:none" #end > <span
															class="upload_pictures_bottom_w"> <input
																name="imgFile" type="file" id="imgFile"
																onchange="upload_goods_img()" />
														</span>
														</li>
													</ul>
													<input name="image_ids" type="hidden" id="image_ids" /> <input
														name="goods_main_img_id" type="hidden"
														id="goods_main_img_id" />
												</div>
											</div>
											<!--说明 -->
											<div class="upload_pictures_statement">
												<div class="upload_pictures_statement_c">
													<img
														src="$!imageWebServer/resources/style/system/front/default/images/upload_right.png" />
													<span>1、最多可发布 <b style="color: #F00">8</b> 张商品图片<br />
														2、商品主图下方小图可<b style="color: #F00">拖动</b>以便调整顺序<br />
														3、支持格式：$!{imageSuffix}<br /> 4、建议选择尺寸<b
														style="color: #F00">800x800</b>、大小1M内的图片<br /> 5、<i
														id="img_remain_size">#if($!{img_remain_size})#if($!{img_remain_size}>0)图片空间剩余:
															<b style="color: #F00"> $!{img_remain_size} </b> MB
															#end#if($!{img_remain_size}<=0)<b style="color: #F00">空间不足
														</b> #end #else空间大小不受限制 #end
													</i> <br /> 6、空间不足时将无法上传图片<br /> 7、 <img
														src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_left.png" />
														表示从服务器删除图片文件，不可恢复 <br /> 8、 <img
														src="$!imageWebServer/resources/style/system/front/default/images/usercenter/del_right.png" />
														表示删除该商品的图片数据
													</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</td>
						</tr>


						<tr>
							<td rowspan="2" align="right" valign="middle">运费：</td>
							<td><label> <input name="goods_transfee"
									type="radio" id="goods_transfee" value="1" checked="checked" />
									商家承担运费
							</label></td>
						</tr>
						<tr>
							<td><label> <input name="goods_transfee"
									type="radio" id="goods_transfee" value="0" /> 买家承担运费
							</label> <!-- <script>
			jQuery(document).ready(function(){
				
			    jQuery(":radio[id=goods_transfee]").click(function(){
				   var val=jQuery(this).val();
				   if(val==0){
				     jQuery("#transport_template_select").show();
					/*  jQuery("#mail_trans_fee").attr("readonly","readonly");
					 jQuery("#express_trans_fee").attr("readonly","readonly");
					 jQuery("#ems_trans_fee").attr("readonly","readonly"); */
				   }else{
				     jQuery("#transport_template_select").hide();
					 jQuery("#mail_trans_fee").removeAttr("readonly");
					 jQuery("#express_trans_fee").removeAttr("readonly");
					 jQuery("#ems_trans_fee").removeAttr("readonly");
				   }
				}); 
			   #if($!obj.transport)
			     jQuery(":radio[id=transport_type][value=0]").attr("checked","checked");
				 jQuery("#transport_template_select").show();
			   #else
			     jQuery(":radio[id=transport_type][value=1]").attr("checked","checked");
				 jQuery("#transport_template_select").hide();
			   #end  
			   #if($!obj.goods_transfee==0)
			      jQuery("#transport_template_select").show();
			   #end
			});
			</script> -->
								<div id="buyer_transport_info"
									style="display: none; width: 80%; margin-top: 10px; padding-left: 0px;">
									<ul style="line-height: 30px;">
										<li><label> <input name="transport_type"
												type="hidden" id="transport_type" value="使用运费模板" />
										</label>
											<div id="transport_template_select"
												style="padding-left: 30px;">
												<input type="hidden" value="$!obj.transport.id"
													name="transport_id" id="transport_id" /> <span
													style="color: #06C;" id="transport_template_name">$!{obj.transport.trans_name}</span>
												<span
													style="display: block; width: 70px; height: 28px; text-align: center; border: #CCC solid 1px;">
													<a href="javascript:void(0);"
													dialog_uri="$!webPath/seller/goods_transport.htm"
													dialog_title="选择运费模板" dialog_width="600"
													dialog_height="500" dialog_id="transport_template_frm">选择模板</a>
												</span>
											</div></li>

									</ul>
								</div></td>
						</tr>
						<tr id="goods_detail">
							<td colspan="2" class="tableh1">产品亮点</td>
						</tr>
						<tr>
							<td align="right" valign="middle">1：</td>
							<td><input name="features_one" id="features_one"
								class="input_l" value="$!obj.features_one" type="text" /></td>
						</tr>
						<tr>
							<td align="right" valign="middle">2：</td>
							<td><input name="features_two" id="features_two"
								class="input_l" value="$!obj.features_two" type="text" /></td>
						</tr>
						<tr>
							<td align="right" valign="middle">3：</td>
							<td><input name="features_three" id="features_three"
								class="input_l" value="$!obj.features_three" type="text" /></td>
						</tr>
						<tr>
							<td align="right" valign="middle">4：</td>
							<td><input name="features_four" id="features_four"
								class="input_l" value="$!obj.features_four" type="text" /></td>
						</tr>
						<tr>
							<td align="right" valign="middle">5：</td>
							<td><input name="features_five" id="features_five"
								class="input_l" value="$!obj.features_five" type="text" /></td>
						</tr>
						<tr id="goods_detail">
							<td colspan="2" class="tableh1">详情描述</td>
						</tr>
						<tr>
							<td align="right" valign="middle">Brand：</td>
							<td><select name="goods_brand_id" id="goods_brand_id">
									<option value="">Other...</option> #foreach($gb in $gbs)

									<option value="$!gb.id">$!gb.name</option> #end

							</select></td>
						</tr>

						<tr>
							<td align="right" valign="top">Description：</td>
							<td><div style="width: 862px;">
									<!--  <div class="detail_td_web_nav" style="width:862px;">
                  <div class="addphoto_c"><a id="detail_web" class="this" href="javascript:void(0);" onclick="switch_detail_editor('web');">电脑端</a></div>
                <div> -->
									<div id="goods_details_div_web" class="addphoto_c_textarea"
										style="float: left; margin-bottom: 10px;">
										<textarea name="goods_details"
											#if($!store.grade.add_funciton) style="width: 100%; height: 500px; visibility: hidden;"
											#else cols="140" rows="25" style="resize:none" #end
											id="goods_details_web">$!obj.goods_details</textarea>
									</div>
									<div id="goods_details_div_app" class="addphoto_c_textarea"
										style="float: left; margin-bottom: 10px; display: none">
										<textarea name="goods_details_mobile"
											#if($!store.grade.add_funciton) style="width: 100%; height: 500px; visibility: hidden;"
											#else cols="140" rows="25" style="resize:none" #end
											id="goods_details_app">
                  $!obj.goods_details_mobile
                  </textarea>
									</div>
									<div id="goods_details_div_app_content"
										class="goods_details_div_app_right" style="display: none;">
										<li>手机端商品描述说明：</li>
										<li>1.手机端商品描述用于手机app，描述应该符合手机用户的使用场景。</li>
										<li>2.由于手机端的特殊性，建议只使用图片和文字来描述您的商品，并合理安排您的图片的数量和大小。</li>
									</div>
								</div> #if($!store.grade.add_funciton) <script>
              function switch_editor_photo(obj){
			     var album_id = jQuery(obj).attr("album_id");
				 jQuery.post("$!webPath/seller/goods_img.htm",{"type":"goods_detail_album","album_id":album_id},function(text){
				   jQuery(".editor_photo_detail").empty();																					  
			  	   jQuery(".editor_photo_detail").append(text);
			     },"text"); 
				 jQuery(".editor_photo_detail").show();
		       }
		   	  function switch_editor_album(mark){
				 var dis=jQuery(".editor_photo_detail").css("display");
				 if(dis=="none" || mark=="album_list"){
					 jQuery.post("$!webPath/seller/goods_album.htm",{"type":"goods_detail_album","ajax_type":".editor_photo_detail"},function(text){
						  jQuery(".editor_photo_detail").empty();																					  
						  jQuery(".editor_photo_detail").append(text).show();
						  jQuery("#album_switch").text("关闭相册图片");
					 },"text"); 
				  }else{
					 jQuery(".editor_photo_detail").hide();
					   jQuery("#album_switch").text("打开相册图片");
				  }		
			 }
            </script>
								<div class="photoimg">
									<div class="addphoto">
										<a id="album_switch" href="javascript:void(0);"
											onclick="switch_editor_album('');">打开相册图片</a>
									</div>
									<div class="editor_photo_detail" style="display: none;">
									</div>
								</div> #end</td>
						</tr>
						<!--  <tr id="goods_pack">
            <td colspan="2" class="tableh1">包装及售后</td>
          </tr> -->
						<!--  <tr>
            <td align="right" valign="top">包装清单：</td>
            <td><textarea name="pack_details"   cols="140" rows="10"  style="resize:none" id="pack_details">$!obj.pack_details</textarea></td>
          </tr> -->
						<tr style="display: none;">
							<td align="right" valign="top">售后保障：</td>
							<td><textarea name="goods_service" cols="140" rows="10"
									style="resize: none" id="goods_service">$!obj.goods_service</textarea></td>
						</tr>
						<tr id="goods_spec" style="display: none;">
							<td colspan="2" class="tableh1">特殊商品</td>
						</tr>
						<!--           #if(!$!obj)
          <tr style="display:none;">
            <td align="right" valign="top"><input name="f_code_json" id="f_code_json" type="hidden" value="$!obj.goods_f_code" />
              F码商品：</td>
            <td class="sptable"><label>
                <input name="f_sale_type" type="radio" id="f_sale_type" value="1" />
                是 </label>
              <label>
                <input name="f_sale_type" type="radio" id="f_sale_type" value="0" checked="checked" />
                否 </label>
              <span class="hui2">该商品是否需要F码购买</span></td>
          </tr>
          <tr id="f_code_1" style="display:none;">
            <td align="right" valign="top">F码前缀：</td>
            <td class="sptable"><span class="tabtxt1 size2">
              <input name="f_code_profix" type="text" id="f_code_profix" />
              </span> <span class="hui2">保存商品自动生成F码的前缀</span></td>
          </tr>
          <tr id="f_code_2" style="display:none;">
            <td align="right" valign="top">F码数量：</td>
            <td class="sptable"><span class="tabtxt1 size2">
              <input name="f_code_count" type="text" id="f_code_count" />
              </span><span class="hui2">保存商品自动生成F码的数量，编辑商品时候如果填写会增量生成</span></td>
          </tr>
          <script>
		  function f_code_show(){
		    jQuery("#f_code_list").show();
			jQuery("#f_code_no_list").hide();
			jQuery("a[id=f_code_show]").hide();
			jQuery("a[id=f_code_hide]").show();
		  }
		  function f_code_hide(){
		    jQuery("#f_code_list").hide();
			jQuery("#f_code_no_list").show();
			jQuery("a[id=f_code_show]").show();
			jQuery("a[id=f_code_hide]").hide();
		  }
		  </script> 
          #if($!obj.goods_f_code)
          <tr id="f_code_3" style="display:none;">
            <td align="right" valign="top">F码列表<a href="javascript:void(0);" onclick="f_code_show();" id="f_code_show">[+]</a> <a id="f_code_hide" style="display:none;" href="javascript:void(0);" onclick="f_code_hide();">[-]</a>：</td>
            <td class="sptable"><div class="presell" id="f_code_no_list"><a href="javascript:void(0);" onclick="f_code_show();">点击打开F码列表信息</a></div>
              <div class="presell" id="f_code_list" style="display:none;">
                <ul>
                  #foreach($f_map in $CommUtil.Json2List("$!obj.goods_f_code"))
                  <li><i>F码：</i><span>$f_map.get("code")</span><b>状态 : #if($f_map.get("status")==0)未使用#else已使用#end</b></li>
                  #end
                </ul>
              </div></td>
          </tr>
          #end
          <tr style="display:none;">
            <td align="right" valign="top">预售商品：</td>
            <td class="sptable"><label>
                <input name="advance_sale_type" type="radio" id="advance_sale_type" value="1" />
                是 </label>
              <label>
                <input name="advance_sale_type" type="radio" id="advance_sale_type" value="0" checked="checked" />
                否 </label>
              <span class="hui2">该商品是否预售商品</span></td>
          </tr>
          <tr id="advance_sale_1" style="display:none;">
            <td align="right" valign="top">发货时间：</td>
            <td class="sptable"><span class="tabtxt1 size2">
              <input name="advance_date" id="advance_date" type="text" value="$!CommUtil.formatShortDate($!obj.advance_date)" />
              </span></td>
          </tr>
          #else
          #set($status="")
          #if($!obj.activity_status==1 ||$!obj.activity_status==2)
          #set($status="商城促销活动")
          #end
          #if($!obj.group_buy==2)
          #set($status="团购活动")
          #end
          #if($!obj.combin_status==1)
          #set($status="组合销售活动")
          #end
          #if($!obj.order_enough_give_status==1)
          #set($status="满就送活动")
          #end
          #if($!obj.enough_reduce==1)
          #set($status="满就减活动")
          #end
          #if($!status=="")
          <tr>
            <td align="right" valign="top"><input name="f_code_json" id="f_code_json" type="hidden" value="$!obj.goods_f_code" />
              F码商品：</td>
            <td class="sptable"><label>
                <input name="f_sale_type" type="radio" id="f_sale_type" value="1" />
                是 </label>
              <label>
                <input name="f_sale_type" type="radio" id="f_sale_type" value="0" checked="checked" />
                否 </label>
              <span class="hui2">该商品是否需要F码购买</span></td>
          </tr>
          <tr id="f_code_1" style="display:none;">
            <td align="right" valign="top">F码前缀：</td>
            <td class="sptable"><span class="tabtxt1 size2">
              <input name="f_code_profix" type="text" id="f_code_profix" />
              </span> <span class="hui2">保存商品自动生成F码的前缀</span></td>
          </tr>
          <tr id="f_code_2" style="display:none;">
            <td align="right" valign="top">F码数量：</td>
            <td class="sptable"><span class="tabtxt1 size2">
              <input name="f_code_count" type="text" id="f_code_count" />
              </span><span class="hui2">保存商品自动生成F码的数量，编辑商品时候如果填写会增量生成</span></td>
          </tr>
          <script>
                  function f_code_show(){
                    jQuery("#f_code_list").show();
                    jQuery("#f_code_no_list").hide();
                    jQuery("a[id=f_code_show]").hide();
                    jQuery("a[id=f_code_hide]").show();
                  }
                  function f_code_hide(){
                    jQuery("#f_code_list").hide();
                    jQuery("#f_code_no_list").show();
                    jQuery("a[id=f_code_show]").show();
                    jQuery("a[id=f_code_hide]").hide();
                  }
                  </script> 
          #if($!obj.goods_f_code)
          <tr id="f_code_3" style="display:none;">
            <td align="right" valign="top">F码列表<a href="javascript:void(0);" onclick="f_code_show();" id="f_code_show">[+]</a> <a id="f_code_hide" style="display:none;" href="javascript:void(0);" onclick="f_code_hide();">[-]</a>：</td>
            <td class="sptable"><div class="presell" id="f_code_no_list"><a href="javascript:void(0);" onclick="f_code_show();">点击打开F码列表信息</a></div>
              <div class="presell" id="f_code_list" style="display:none;">
                <ul>
                  #foreach($f_map in $CommUtil.Json2List("$!obj.goods_f_code"))
                  <li><i>F码：</i><span>$f_map.get("code")</span><b>状态 : #if($f_map.get("status")==0)未使用#else已使用#end</b></li>
                  #end
                </ul>
              </div></td>
          </tr>
          #end
          <tr>
            <td align="right" valign="top">预售商品：</td>
            <td class="sptable"><label>
                <input name="advance_sale_type" type="radio" id="advance_sale_type" value="1" />
                是 </label>
              <label>
                <input name="advance_sale_type" type="radio" id="advance_sale_type" value="0" checked="checked" />
                否 </label>
              <span class="hui2">该商品是否预售商品</span></td>
          </tr> -->
						<tr id="advance_sale_1" style="display: none;">
							<td align="right" valign="top">发货时间：</td>
							<td class="sptable"><span class="tabtxt1 size2"> <input
									name="advance_date" id="advance_date" type="text"
									value="$!CommUtil.formatShortDate($!obj.advance_date)" />
							</span></td>
						</tr>
						#else
						<tr>
							<td align="right" valign="top"></td>
							<td class="sptable" style="color: #F00">【该商品已经参加$!{status}，不可编辑为F码商品或预售商品】</td>
						</tr>
						#end #end
						<tr id="goods_format" style="display: none;">
							<td colspan="2" class="tableh1">商品版式</td>
						</tr>
						<tr style="display: none;">
							<td align="right" valign="top">顶部版式：</td>
							<td class="sptable"><select name="goods_top_format_id"
								id="goods_top_format_id">
									<option value="">请选择...</option> #foreach($gf in $gfs)
									#if($!gf.gf_type==0)

									<option value="$!gf.id">$!gf.gf_name</option> #end #end

							</select> <span class="hui2">商品详情固定的顶部内容</span></td>
						</tr>
						<tr style="display: none;">
							<td align="right" valign="top">底部版式：</td>
							<td class="sptable"><select name="goods_bottom_format_id"
								id="goods_bottom_format_id">
									<option value="">请选择...</option> #foreach($gf in $gfs)
									#if($!gf.gf_type==1)

									<option value="$!gf.id">$!gf.gf_name</option> #end #end

							</select> <span class="hui2">商品详情固定的底部内容</span></td>
						</tr>
						<tr id="goods_other">
							<td colspan="2" class="tableh1">其他信息</td>
						</tr>
						<script>
		  function add_goods_class(){
		    var s="<select name='ugc_id_0' id='ugc_id_0'><option value=''>请选择...</option>#foreach($ugc in $ugcs)<option value='$!ugc.id'>$!ugc.className</option> #foreach($c_ugc in $ugc.childs) <option value='$!c_ugc.id'>&nbsp;&nbsp;$!c_ugc.className</option>#end #end </select>";
			var reg=new RegExp("ugc_id_0","g");
			s=s.replace(reg,"ugc_id_"+user_goods_class_count);
			jQuery("#ugc_id_"+(user_goods_class_count-1)).after(s);
			user_goods_class_count++;
		  }
		</script>
						<!-- <tr>
            <td align="right" valign="top">本店分类：</td>
            <td><span> <span id="ugc_info"> #if(!$!obj||$!{obj.goods_ugcs.size()}==0)
              <select name="ugc_id_1" id="ugc_id_1">
                <option value="">请选择...</option>
                
			  #foreach($ugc in $ugcs)
                
                <option value="$!ugc.id">$!ugc.className</option>
                
			  #foreach($c_ugc in $ugc.childs)
                
                <option value="$!c_ugc.id">&nbsp;&nbsp;$!c_ugc.className</option>
                
			  #end
			  #end
              
              </select>
              #else
              #foreach($goods_ugc in $obj.goods_ugcs)
              <select name="ugc_id_$!{velocityCount}" id="ugc_id_$!{velocityCount}">
                <option value="">请选择本店分类...</option>
                
			  #foreach($ugc in $ugcs)
                
                <option value="$!ugc.id">$!ugc.className</option>
                
			  #foreach($c_ugc in $ugc.childs)
                
                <option value="$!c_ugc.id">&nbsp;&nbsp;$!c_ugc.className</option>
                
			  #end
			  #end
              
              </select>
              #end
              #end </span> </span><a class="button_common" href="javascript:void(0);" onclick="add_goods_class();">新增分类</a> <span class="hui2 tableli">
              <ul>
                <li>商品可以从属于店铺的多个分类之下,</li>
                <li>店铺分类可以由 "商家中心 ->  商品管理 -> <a href="$!webPath/seller/goods_class_list.htm">商品分类</a>" 中自定义 </li>
              </ul>
              </span></td>
          </tr> -->
						<!--   #if($!store.grade.gradeName == "Dubai")
          <tr style="display:none">
            <td align="right" valign="top">发货地址：</td>
             <td><span class="base_sex">
              <label>
               <input type="radio" name="site" id="site" value="1"  checked="checked"/>广州</label></span><span class="base_sex"> -->
						<!--                 &nbsp&nbsp&nbsp<label>
                <input type="radio" name="site" id="site" value="0" />深圳</label></span><span class="base_sex">
               &nbsp&nbsp&nbsp <label>
                <input type="radio" name="site" id="site" value="-1" />香港</label></span></td> -->
						<!--  <td class="prorelease"><select name="area1" id="area1" level="2">
                <option value="">省份/自治区</option>
                
          #foreach($area in $areas)            
                
                <option value="$!area.id" #if($!area.id==$!de_area.parent.parent.id) selected="true" #end>$!area.areaName</option>
                  
           #end          
              
              </select>
              <select name="area2" id="area2" level="3">
                <option value="">市/区</option>
                  
         #foreach($area in $de_area.parent.parent.childs)                     
                
                <option value="$!area.id" #if($!area.id==$!de_area.parent.id) selected="true"#end>$!area.areaName</option>
                    
         #end                    
              
              </select>
              <select name="area3" id="area3" level="4">
                <option value="">县/区</option>
                   
         #foreach($area in $$de_area.parent.childs)                     
                
                <option value="$!area.id" #if($!area.id==$!de_area.id) selected="true"#end>$!area.areaName</option>
                
         #end                    
              
              </select>
              <input id="delivery_area_id" name="delivery_area_id" type="hidden" value="$!obj.delivery_area_id" /></td> -->
						<!-- </tr>
          #else
          <tr>
            <td align="right" valign="top">发货地址：</td>
             <td><span class="base_sex">
              <label>
               <input type="radio" name="site" id="site" value="1"  checked="checked"/>广州</label></span><span class="base_sex"> 
                &nbsp&nbsp&nbsp<label>
                <input type="radio" name="site" id="site" value="0" />深圳</label></span><span class="base_sex">
               &nbsp&nbsp&nbsp <label>
                <input type="radio" name="site" id="site" value="-1" />香港</label></span></td> 
            <td class="prorelease"><select name="area1" id="area1" level="2">
                <option value="">省份/自治区</option>
                
          #foreach($area in $areas)            
                
                <option value="$!area.id" #if($!area.id==$!de_area.parent.parent.id) selected="true" #end>$!area.areaName</option>
                  
           #end          
              
              </select>
              <select name="area2" id="area2" level="3">
                <option value="">市/区</option>
                  
         #foreach($area in $de_area.parent.parent.childs)                     
                
                <option value="$!area.id" #if($!area.id==$!de_area.parent.id) selected="true"#end>$!area.areaName</option>
                    
         #end                    
              
              </select>
              <select name="area3" id="area3" level="4">
                <option value="">县/区</option>
                   
         #foreach($area in $$de_area.parent.childs)                     
                
                <option value="$!area.id" #if($!area.id==$!de_area.id) selected="true"#end>$!area.areaName</option>
                
         #end                    
              
              </select>
              <input id="delivery_area_id" name="delivery_area_id" type="hidden" value="$!obj.delivery_area_id" /></td> 
          </tr>
          #end-->
						<tr>
							<td align="right" valign="top">到仓时间：</td>
							<td><span class="base_sex"> <label> <input
										type="radio" name="number_days" id="radio" value="0"
										checked="checked" />一天
								</label></span><span class="base_sex"> &nbsp&nbsp&nbsp<label> <input
										type="radio" name="number_days" id="radio" value="1" />两天
								</label></span><span class="base_sex"> &nbsp&nbsp&nbsp <label> <input
										type="radio" name="number_days" id="radio" value="2" />三天
								</label></span></td>
						</tr>
						<tr>
							<td align="right" valign="top" style="display: none">商品发布：</td>
							<td class="prorelease" style="display: none"><span> <label
									style="cursor: pointer"> <input
										name="publish_goods_status" id="publish_goods_status"
										type="radio" value="0" checked="checked" /> &nbsp;立即发布
								</label>
							</span> <!--  <span>
               <label style="cursor:pointer">
                <input name="publish_goods_status" id="publish_goods_status" type="radio" value="1" />
                &nbsp;放入仓库 </label>
              </span> <span>
              <label style="cursor:pointer">
                <input name="publish_goods_status" id="publish_goods_status" type="radio" value="2" />
                &nbsp;定时发布 </label>
              </span> <span style="display:none;" id="publish_info" class="publish_info" >
              <input  name="publish_day" id="publish_day" type="text" value="$!default_publish_day" />
              日
              <select name="publish_hour" id="publish_hour">
                <option value="0">00</option>
                <option value="1">01</option>
                <option value="2">02</option>
                <option value="3">03</option>
                <option value="4">04</option>
                <option value="5">05</option>
                <option value="6">06</option>
                <option value="7">07</option>
                <option value="8">08</option>
                <option value="9">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
              </select>
              时
              <select name="publish_min" id="publish_min">
                <option value="0">0分</option>
                <option value="15">15分</option>
                <option value="30">30分</option>
                <option value="45">45分</option>
              </select>
              分</span></td> -->
						</tr>
						<!--  <tr>
            <td valign="top" align="right">商品推荐：</td>
            <td class="prorelease"><span><strong>
              <label>
                <input name="goods_recommend" id="goods_recommend" type="radio" value="true" checked="checked" />
                &nbsp;是 </label>
              </strong><strong>
              <label>
                <input name="goods_recommend" id="goods_recommend" type="radio" value="false" />
                &nbsp;否 </label>
              </strong></span> <span class="hui2">被推荐的商品会显示在店铺首页<span class="sptable"></span></span></td>
          </tr> -->
						  <!-- <tr>
            <td align="right" valign="top">SEO关键字：</td>
            <td class="sptable"><span class="tabtxt1 size1">
              <input name="seo_keywords" type="text" id="seo_keywords" value="$!obj.seo_keywords" />
              </span><span class="hui2 noteswidth">SEO关键字 (keywords) 出现在商品详细页面头部的 Meta 标签中，
              用于记录本页面商品的关键字，多个关键字间请用半角逗号 "," 隔开。</span></td>
          </tr>
          <tr>
            <td align="right" valign="top">SEO描述：</td>
            <td class="sptable"><span class="texttable">
              <textarea name="seo_description" cols="" rows="" id="seo_description">$!obj.seo_description</textarea>
              </span> <span class="hui2 noteswidth">SEO描述 (Description) 出现在商品详细页面头部的 Meta 标签中， 
              用于记录本页面商品的的描述，建议80字左右，应该是该商品的最精确的简短的概述。</span></td>
          </tr>  -->

						<tr>
							<td>&nbsp;</td>
							<td><span class="submittable"> <input name=""
									type="button" id="save" value="提交" onclick="saveForm();"
									style="cursor: pointer;" />
							</span> <input name="goods_session" type="hidden" id="goods_session"
								value="$!goods_session" /></td>
							<input name="eid" type="hidden" id="eid" value="" />
							</td>
							<input name="goods_id" type="hidden" id="goods_id"
								value="$!obj.id" />
							<input type="hidden" value="$!obj.transport.id"
								name="transport_id" id="transport_id" />
							<input name="store_id" type="hidden" id="store_id"
								value="$!store.id" />
						</tr>
					</table>
				</form>
				<script>
          var id = "$!store.id";
         
          var eid = jQuery("#eid").val(id);
      </script>
				<!--      <div id="my_dialog" title="规格"  style="display: none" >
	   #foreach($gs in $goods_spec_list)
          <tr id="gs_$!{gs.id}" gs_name="$!{gs.name}">
            <td align="right" valign="top">$!{gs.name}：</td>
            <td class="sptable"><ul class="color_chose">
                #foreach($gsp in $!gs.properties)
                <li> <span class="cc_sp1">
                  <input name="spec_$!{gsp.id}" type="checkbox" id="spec_$!{gsp.id}" gs_id="$!gs.id"  gsp_val="$!gsp.value" value="$!gsp.id" />
                  </span>
                  <label for="spec_$!{gsp.id}"> #if($!gs.type=="img") <span class="cc_sp2"> <img src="$!imageWebServer/$!{gsp.specImage.path}/$!{gsp.specImage.name}" width="16" height="16" /> </span> #end <span class="cc_sp3">$!gsp.value</span> </label>
                </li>
                #end
              </ul></td> 
          </tr>
          #end
    </div> -->

			</div>
		</div>
	</div>
	$!httpInclude.include("/footer.htm")
	<style>
.input_l {
	border: none;
	border: 1px solid #dadada;
	width: 70%;
	border-radius: 3px;
	height: 28px;
	line-height: 28px;
	padding: 0 5px;
}
</style>
</body>
</html>
